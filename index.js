const { AoiClient, LoadCommands } = require("aoi.js");
const { AoiVoice, PlayerEvents, PluginName, Cacher, Filter } = require("@aoijs/aoi.music");
const { channel } = require("aoi.js/src/events/slashOption");
const { AoiCanvas } = require("@aoijs/aoi.canvas");
const { pathToFfmpeg } = require('ffmpeg-static');


const client = new AoiClient({
  token: "",
  prefix: "!",
  intents: ["MessageContent", "Guilds", "GuildMessages", "GuildPresences", "GuildMessageTyping", "GuildMembers", "GuildWebhooks", "GuildVoiceStates", "GuildBans", "GuildEmojisAndStickers", "GuildInvites", "GuildMessageReactions", "GuildIntegrations", "DirectMessages", "DirectMessageReactions", "DirectMessageTyping", "GuildScheduledEvents"],
  events: ["onMessage", "onInteractionCreate", "onPresenceUpdate", "onTypingStart", "onUserUpdate", "onMembersChunk", "onMemberAvailable", "onMemberUpdate", "onLeave", "onJoin", "onWebhooksUpdate", "onVoiceStateUpdate", "onBanRemove", "onBanAdd", "onStickerUpdate", "onStickerDelete", "onStickerCreate", "onEmojiUpdate", "onEmojiDelete", "onEmojiCreate", "onThreadMembersUpdate", "onThreadMemberUpdate", "onThreadListSync", "onThreadDelete", "onThreadUpdate", "onThreadCreate", "onStageInstanceDelete", "onStageInstanceUpdate", "onStageInstanceCreate", "onChannelPinsUpdate", "onChannelDelete", "onChannelUpdate", "onChannelCreate", "onRoleDelete", "onRoleUpdate", "onRoleCreate", "onGuildUnavailable", "onGuildUpdate", "onGuildLeave", "onGuildJoin", "onInviteDelete", "onInviteCreate", "onReactionRemoveAll", "onReactionRemove", "onReactionAdd", "onMessageDeleteBulk", "onMessageUpdate", "onMessageDelete", "onFunctionError", "onApplicationCommandPermissionsUpdate", "onVariableCreate", "onVariableDelete", "onVariableUpdate"],
  disableFunctions: ["$clientToken", "$clientPrefixes"],
  mobilePlatform: false,
  respondToBots: false,
  guildOnly: false,
  cache: {
        users: 2000,
        messages: 5000,
    },
  disableAoiDB: false,
  database: {
    type: "aoi.db",
    db: require("@aoijs/aoi.db"),
    dbType: "KeyValue",
    tables: ["main"],
    securityKey: "5f160b24ada0471c9283c55285ea3a27",
  },
    suppressAllErrors: false,
    errorMessage: "Fotal Error!",
    aoiAutoUpdate: false,
    aoiWarning: true,
    aoiLogs: true,
});

const canvas = new AoiCanvas(client);

const voice = new AoiVoice(client, {
   devOptions: {
     debug: false,
  },
  requestOptions: {
    offsetTimeout: 1500,
    soundcloudLikeTrackLimit: -1,
    youtubePlaylistLimit: -1,
    spotifyPlaylistLimit: -1
  },
  searchOptions: {
   youtubeAuth: true,
   soundcloudClientId: "",
   spotifyAuth: {
       clientId: "befdbab3cd754c4eb6b30ecd94d7d461",
       clientSecret: "5f160b24ada0471c9283c55285ea3a27"
   },
   youtubegl: "US",
   youtubeClient: "TV_EMBEDDED"
  }
});
client.status({
    name: "mc.yutihvh.com",
    type: "PLAYING",
    status: "idle",
    time: 20
});
client.status({
    name: "–õ—é–±–∏—Ç —Ç–µ–±—è üíó",
    type: "CUSTOM",
    status: "idle",
    time: 25
});
client.status({
    name: "–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ",
    type: "STREAMING",
    url: "https://youtube.com/",
    status: "idle",
    time: 20
});
client.variables({
  level: 1,
  xp: 0,
  logs: "1242150721369931847",
  tickets_open: 0,
  tickets: 0,
  ticket_close_status: "false",
  ticket_user: "none",
  cash: 0,
  bank: 0,
  user: "",
  document: "none",
  fio: "none",
  bio: "none",
  vk: "none",
  years: "none",
  version: "5.0.0",
  warns: "0",
  application_helper: "on",
  application_yt: "off",
  application_tiktok: "off",
  music_msg: "0",
  music_thumbnail : "0",
  music_title: "0",
  music_author: "0",
  music_duration: "0",
  requester: "",
  url: "",
  music_authoricon: "",
  status: "",
  bonusinvites: "0",
  page: ""
});

client.command({
    name: "$alwaysExecute",
    $if: "old",
    code: `
$if[$checkContains[$message;https://discord.gg/;https://dsc.gg/;discord.gg/;dsc.gg/]==true]
$channelSendMessage[$getGuildVar[logs;$guildID];{newEmbed:{description:–£—á–∞—Å—Ç–Ω–∏–∫ **$username** (<@$authorID>) –ø–æ–ª—É—á–∏–ª –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ}{field:–ö–∞–Ω–∞–ª:**$channelName[$channelID]** (<#$channelID>):true}{field:–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:**#$getUserVar[warns;$authorID]**:true}{field:–°–ª—É—á–∞–π:**#$getGuildVar[warns]**:true}{field:–ü—Ä–∏—á–∏–Ω–∞:–ê–≤—Ç–æ–º–æ–¥–µ—Ä–∞—Ü–∏—è#COLON# –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è:false}{footer:Id —É—á–∞—Å—Ç–Ω–∏–∫–∞#COLON# $authorID:$authorAvatar}{timestamp}{color:ffcb59}}]
$if[$getUserVar[warns;$authorID]==3]
$channelSendMessage[$getGuildVar[logs;$guildID];{newEmbed:{description:–£—á–∞—Å—Ç–Ω–∏–∫ **$username** (<@$authorID>) –ø–æ–ª—É—á–∏–ª –Ω–∞–∫–∞–∑–∞–Ω–∏–µ}{field:–ö–∞–Ω–∞–ª:**$channelName[$channelID]** (<#$channelID>):true}{field:–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:**#$getUserVar[warns;$authorID]**:true}{field:–°–ª—É—á–∞–π:**#$getGuildVar[warns]**:true}{field:–ü—Ä–∏—á–∏–Ω–∞:–¢–∞–π–º-–ê—É—Ç#COLON# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞ –ø—Ä–∏–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ \`#3\` (—Å–ª—É—á–∞–π \`#$getGuildVar[warns;$guildID]\`):false}{footer:Id —É—á–∞—Å—Ç–Ω–∏–∫–∞#COLON# $authorID:$authorAvatar}{timestamp}{color:ffcb59}}]
$timeoutMember[$guildID;$authorID;2h;false;–¢–∞–π–º-–ê—É—Ç: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞ –ø—Ä–∏–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ \`#3\` (—Å–ª—É—á–∞–π \`#$getGuildVar[warns;$guildID]\`)]
$endif
$if[$getUserVar[warns;$authorID]==7]
$channelSendMessage[$getGuildVar[logs;$guildID];{newEmbed:{description:–£—á–∞—Å—Ç–Ω–∏–∫ **$username** (<@$authorID>) –ø–æ–ª—É—á–∏–ª –Ω–∞–∫–∞–∑–∞–Ω–∏–µ}{field:–ö–∞–Ω–∞–ª:**$channelName[$channelID]** (<#$channelID>):true}{field:–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:**#$getUserVar[warns;$authorID]**:true}{field:–°–ª—É—á–∞–π:**#$getGuildVar[warns]**:true}{field:–ü—Ä–∏—á–∏–Ω–∞:–¢–∞–π–º-–ê—É—Ç#COLON# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞ –ø—Ä–∏–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ \`#7\` (—Å–ª—É—á–∞–π \`#$getGuildVar[warns;$guildID]\`):false}{footer:Id —É—á–∞—Å—Ç–Ω–∏–∫–∞#COLON# $authorID:$authorAvatar}{timestamp}{color:ffcb59}}]
$timeoutMember[$guildID;$authorID;5h;false;–¢–∞–π–º-–ê—É—Ç: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞ –ø—Ä–∏–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ \`#7\` (—Å–ª—É—á–∞–π \`#$getGuildVar[warns;$guildID]\`)]
$endif
$if[$getUserVar[warns;$authorID]==12]
$channelSendMessage[$getGuildVar[logs;$guildID];{newEmbed:{description:–£—á–∞—Å—Ç–Ω–∏–∫ **$username** (<@$authorID>) –ø–æ–ª—É—á–∏–ª –Ω–∞–∫–∞–∑–∞–Ω–∏–µ}{field:–ö–∞–Ω–∞–ª:**$channelName[$channelID]** (<#$channelID>):true}{field:–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:**#$getUserVar[warns;$authorID]**:true}{field:–°–ª—É—á–∞–π:**#$getGuildVar[warns]**:true}{field:–ü—Ä–∏—á–∏–Ω–∞:–¢–∞–π–º-–ê—É—Ç#COLON# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞ –ø—Ä–∏–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ \`#12\` (—Å–ª—É—á–∞–π \`#$getGuildVar[warns;$guildID]\`):false}{footer:Id —É—á–∞—Å—Ç–Ω–∏–∫–∞#COLON# $authorID:$authorAvatar}{timestamp}{color:ffcb59}}]
$timeoutMember[$guildID;$authorID;15h;false;–¢–∞–π–º-–ê—É—Ç: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞ –ø—Ä–∏–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ \`#12\` (—Å–ª—É—á–∞–π \`#$getGuildVar[warns;$guildID]\`)]
$endif
$setGuildVar[warns;$sum[$getGuildVar[warns;$guildID];1];$guildID]
$setUserVar[warns;$sum[$getUserVar[warns;$authorID];1];$authorID]
$deleteCommand

$elseif[$checkContains[$message;—à–ª—é—Ö–∞;–≥–µ–π;–ø–∏–¥–æ—Ä–∞—Å;–∏–¥–∏–æ—Ç;–ø—Ä–æ—Å—Ç–∏—Ç—É—Ç–∫–∞;–µ–±–∞–ª;—Ç—Ä–∞—Ö–∞–ª;–Ω–∞—Å–∏–ª–æ–≤–∞–ª;–ø–∏–¥–æ—Ä;—Ö—É–µ—Å–æ—Å;–ø–æ–¥—Å–æ—Å;–æ—á–∫–æ—à–Ω–∏–∫;–≥–∞–Ω–¥–æ–Ω;—Å—É–∫–∞;–≥–æ–Ω–¥—É—Ä–∞—Å;–≥–æ–Ω–¥–æ–Ω;–µ–±–ª–∞–Ω;–∞—Ö—É–µ–ª;–±–ª—è–¥–∏–Ω–∞;–¥–æ–ª–±–∞–µ–±;—É—ë–±;–ü–∏–∑–¥–µ—Ü;–ø–∏–∑–¥–µ—Ü;–®–ª—é—Ö–∞;—Ö—É–π;–•—É–π]==true]
$channelSendMessage[$getGuildVar[logs;$guildID];{newEmbed:{description:–£—á–∞—Å—Ç–Ω–∏–∫ **$username** (<@$authorID>) –ø–æ–ª—É—á–∏–ª –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ}{field:–ö–∞–Ω–∞–ª:**$channelName[$channelID]** (<#$channelID>):true}{field:–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:**#$getUserVar[warns;$authorID]**:true}{field:–°–ª—É—á–∞–π:**#$getGuildVar[warns]**:true}{field:–ü—Ä–∏—á–∏–Ω–∞:–ê–≤—Ç–æ–º–æ–¥–µ—Ä–∞—Ü–∏—è#COLON# –ü–ª–æ—Ö–∏–µ —Å–ª–æ–≤–∞:false}{footer:Id —É—á–∞—Å—Ç–Ω–∏–∫–∞#COLON# $authorID:$authorAvatar}{timestamp}{color:ffcb59}}]
$if[$getUserVar[warns;$authorID]==3]
$channelSendMessage[$getGuildVar[logs;$guildID];{newEmbed:{description:–£—á–∞—Å—Ç–Ω–∏–∫ **$username** (<@$authorID>) –ø–æ–ª—É—á–∏–ª –Ω–∞–∫–∞–∑–∞–Ω–∏–µ}{field:–ö–∞–Ω–∞–ª:**$channelName[$channelID]** (<#$channelID>):true}{field:–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:**#$getUserVar[warns;$authorID]**:true}{field:–°–ª—É—á–∞–π:**#$getGuildVar[warns]**:true}{field:–ü—Ä–∏—á–∏–Ω–∞:–¢–∞–π–º-–ê—É—Ç#COLON# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞ –ø—Ä–∏–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ \`#3\` (—Å–ª—É—á–∞–π \`#$getGuildVar[warns;$guildID]\`):false}{footer:Id —É—á–∞—Å—Ç–Ω–∏–∫–∞#COLON# $authorID:$authorAvatar}{timestamp}{color:ffcb59}}]
$timeoutMember[$guildID;$authorID;2h;false;–¢–∞–π–º-–ê—É—Ç: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞ –ø—Ä–∏–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ \`#3\` (—Å–ª—É—á–∞–π \`#$getGuildVar[warns;$guildID]\`)]
$endif
$if[$getUserVar[warns;$authorID]==7]
$channelSendMessage[$getGuildVar[logs;$guildID];{newEmbed:{description:–£—á–∞—Å—Ç–Ω–∏–∫ **$username** (<@$authorID>) –ø–æ–ª—É—á–∏–ª –Ω–∞–∫–∞–∑–∞–Ω–∏–µ}{field:–ö–∞–Ω–∞–ª:**$channelName[$channelID]** (<#$channelID>):true}{field:–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:**#$getUserVar[warns;$authorID]**:true}{field:–°–ª—É—á–∞–π:**#$getGuildVar[warns]**:true}{field:–ü—Ä–∏—á–∏–Ω–∞:–¢–∞–π–º-–ê—É—Ç#COLON# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞ –ø—Ä–∏–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ \`#7\` (—Å–ª—É—á–∞–π \`#$getGuildVar[warns;$guildID]\`):false}{footer:Id —É—á–∞—Å—Ç–Ω–∏–∫–∞#COLON# $authorID:$authorAvatar}{timestamp}{color:ffcb59}}]
$timeoutMember[$guildID;$authorID;5h;false;–¢–∞–π–º-–ê—É—Ç: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞ –ø—Ä–∏–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ \`#7\` (—Å–ª—É—á–∞–π \`#$getGuildVar[warns;$guildID]\`)]
$endif
$if[$getUserVar[warns;$authorID]==12]
$channelSendMessage[$getGuildVar[logs;$guildID];{newEmbed:{description:–£—á–∞—Å—Ç–Ω–∏–∫ **$username** (<@$authorID>) –ø–æ–ª—É—á–∏–ª –Ω–∞–∫–∞–∑–∞–Ω–∏–µ}{field:–ö–∞–Ω–∞–ª:**$channelName[$channelID]** (<#$channelID>):true}{field:–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:**#$getUserVar[warns;$authorID]**:true}{field:–°–ª—É—á–∞–π:**#$getGuildVar[warns]**:true}{field:–ü—Ä–∏—á–∏–Ω–∞:–¢–∞–π–º-–ê—É—Ç#COLON# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞ –ø—Ä–∏–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ \`#12\` (—Å–ª—É—á–∞–π \`#$getGuildVar[warns;$guildID]\`):false}{footer:Id —É—á–∞—Å—Ç–Ω–∏–∫–∞#COLON# $authorID:$authorAvatar}{timestamp}{color:ffcb59}}]
$timeoutMember[$guildID;$authorID;24h;false;–¢–∞–π–º-–ê—É—Ç: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞ –ø—Ä–∏–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ \`#12\` (—Å–ª—É—á–∞–π \`#$getGuildVar[warns;$guildID]\`)]
$endif
$setGuildVar[warns;$sum[$getGuildVar[warns;$guildID];1];$guildID]
$setUserVar[warns;$sum[$getUserVar[warns;$authorID];1];$authorID]
$deleteCommand
$endelseif
$endif
$onlyIf[$hasPerms[$guildID;$authorID;administrator;managemessages;moderatemembers]!=true]`
});

client.command({
    name: "$alwaysExecute",
    $if: "old",
    code: `
$if[$messageType[$messageID;$channelID]==8]
$description[–£—á–∞—Å—Ç–Ω–∏–∫ **$username[$authorID]** (<@$authorID>) –¥–∞–ª –Ω–∞—à–µ–º—É –ø—Ä–æ–µ–∫—Ç—É –±—É—Å—Ç, –°–ø–∞—Å–∏–±–æ —Ç–µ–±–µ!\n–í—Å–µ–≥–æ –±—É—Å—Ç–æ–≤#COLON# **$guildBoostCount[$guildID]**]
$addTimestamp
$endif
$if[$messageType[$messageID;$channelID]==9]
$description[–£—Ä–æ–≤–µ–Ω—å –±—É—Å—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞ –±—ã–ª –ø–æ–¥–Ω—è—Ç –¥–æ **1**]
$addTimestamp
$endif
$if[$messageType[$messageID;$channelID]==10]
$description[–£—Ä–æ–≤–µ–Ω—å –±—É—Å—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞ –±—ã–ª –ø–æ–¥–Ω—è—Ç –¥–æ **2**]
$addTimestamp
$endif
$if[$messageType[$messageID;$channelID]==11]
$description[–£—Ä–æ–≤–µ–Ω—å –±—É—Å—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞ –±—ã–ª –ø–æ–ª–Ω—è—Ç –¥–æ **3**]
$addTimestamp
$endif`
});

const { InviteManager } = require("@akarui/aoi.invite");
const i = new InviteManager(client,{
    sk: "a-32-characters-long-string-here",
},['inviteJoin','inviteLeave', 'inviteError']);

voice.addPlugin(PluginName.Cacher, new Cacher("memory"));
voice.addPlugin(PluginName.Filter, new Filter({
    filterFromStart: false
})),
voice.bindExecutor(client.functionManager.interpreter);

const loader = new LoadCommands(client);
voice.addEvent(PlayerEvents.TrackStart);
voice.addEvent(PlayerEvents.TrackEnd);
voice.addEvent(PlayerEvents.QueueEnd);
voice.addEvent(PlayerEvents.AudioError);
voice.addEvent(PlayerEvents.TrackPause);
voice.addEvent(PlayerEvents.TrackResume);
voice.addEvent(PlayerEvents.QueueStart);
voice.addEvent(PlayerEvents.TrackAdd);
loader.load(client.cmd, "./commands/", true);
loader.load(client.cmd, "./events/", true);
loader.load(voice.cmds, "./musicEvents/", true);
loader.load(i.cmds, "./inviteEvents/", true);